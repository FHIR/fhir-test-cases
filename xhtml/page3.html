<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Writing Vital Signs - US Core Implementation Guide v8.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
    <link href="assets/css/hl7.css" rel="stylesheet"/>
    <link href="assets/css/fhir-ig.css" rel="stylesheet"/>

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"12.2"}
    h3,h4,h5,h6{--heading-prefix:"12.2"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->

        <div id="hl7-nav">
          <a id="hl7-logo" no-external="true" href="http://hl7.org">
            <img height="50" alt="Visit the HL7 website" src="assets/images/hl7-logo-header.png"/>
          </a>
        </div>
        <div id="family-nav">
          <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="50" alt="Visit the FHIR website" src="assets/images/fhir-logo-www.png"/> </a>
        </div>
        <div id="hl7-search">
          <a id="hl7-search-lnk" no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
        </div>


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">US Core Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">8.0.0 - STU 8



  <img alt="United States of America flag" src="assets/images/usa.svg" height="16" title="United States of America"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Conformance
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="general-requirements.html">General Requirements</a>
      </li>
      <li>
        <a href="must-support.html">Must Support</a>
      </li>
      <li>
        <a href="scopes.html">SMART on FHIR Obligations and Capabilities</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Guidance
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="uscdi.html">USCDI</a>
      </li>
      <li>
        <a href="general-guidance.html">General Guidance</a>
      </li>
      <li>
        <a href="clinical-notes.html">Clinical Notes</a>
      </li>
      <li>
        <a href="medication-list.html">Medication List</a>
      </li>
      <li>
        <a href="basic-provenance.html">Basic Provenance</a>
      </li>
      <li>
        <a href="screening-and-assessments.html">Screening and Assessments</a>
      </li>
      <li>
        <a href="changes-between-versions.html">Changes Between Versions</a>
      </li>
      <li>
        <a href="relationship-with-other-igs.html">Relationship With Other IGs</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">FHIR Artifacts
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="profiles-and-extensions.html#profiles">Profiles</a>
      </li>
      <li>
        <a href="profiles-and-extensions.html#extensions">Extensions</a>
      </li>
      <li>
        <a href="search-parameters-and-operations.html#search-parameters">Search Parameters</a>
      </li>
      <li>
        <a href="search-parameters-and-operations.html#operations">Operations</a>
      </li>
      <li>
        <a href="terminology.html">Terminology</a>
      </li>
      <li>
        <a href="capability-statements.html">Capability Statements</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="security.html">Security</a>
  </li>
  <li>
    <a href="examples.html">Examples</a>
  </li>
  <li>
    <a href="downloads.html">Downloads</a>
  </li>
  <li>
    <a href="changes.html">Change Log</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Looking Ahead
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="us-core-roadmap.html">US Core Roadmap</a>
      </li>
      <li>
        <a href="writing-vital-signs.html">Writing Vital Signs</a>
      </li>
      <li>
        <a href="patient-data-feed.html">Patient Data Feed</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='looking-ahead.html'><b>Looking Ahead</b></a></li><li><b>Writing Vital Signs</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the US Core (v8.0.0: <a data-no-external="true" href="https://confluence.hl7.org/display/HL7/HL7+Balloting" title="Standard for Trial-Use">STU</a>8) based on <a data-no-external="true" href="http://hl7.org/fhir/R4">FHIR (HL7® FHIR® Standard) R4</a>. This is the current published version.  For a full list of available versions, see the <a data-no-external="true" href="http://hl7.org/fhir/us/core/history.html">Directory of published versions</a>. Page versions: <b>R8</b></p><!--EndReleaseHeader-->
  <h2>Writing Vital Signs</h2>
  





  <table class="colsi">
    <tr>
  
      <td>
        <i>Page standards status:</i> <a href="http://hl7.org/fhir/R4/versions.html#std-process" title="Standard Status">Informative</a>
        
      </td>
  
  
    </tr>
  </table>








    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#examples" id="markdown-toc-examples">Examples</a></li>
  <li><a href="#configuration" id="markdown-toc-configuration">Configuration</a></li>
  <li><a href="#smart-scopes" id="markdown-toc-smart-scopes">SMART Scopes</a></li>
  <li><a href="#resource-submission" id="markdown-toc-resource-submission">Resource Submission</a></li>
  <li><a href="#discarding-observations" id="markdown-toc-discarding-observations">Discarding Observations</a></li>
  <li><a href="#updating-previously-submitted-observations" id="markdown-toc-updating-previously-submitted-observations">Updating Previously Submitted Observations</a></li>
  <li><a href="#including-provenance-information" id="markdown-toc-including-provenance-information">Including Provenance Information</a></li>
</ul>

</div>

<h3 id="examples">Examples</h3>

<p>Patient-facing</p>
<ul>
  <li>A provider creates an order in an EHR for patient home monitoring. Then, the patient's blood pressure cuff sends data to an app on their phone that writes it into their record. The EHR automatically associates the blood pressure data with the appropriate order.</li>
  <li>A patient uses an app to retrieve their vital signs from the EHR, which were recorded during a specialist visit, and they write them to the EHR used by their primary care provider. The provider can review the vital signs within the EHR and incorporate them into the record.</li>
</ul>

<p>Provider-facing</p>
<ul>
  <li>A blood pressure cuff sends readings to an app on a practice tablet that a clinical user uses to write the data to a patient's record in the EHR.</li>
  <li>A patient app saves data to a repository controlled by the app developer. Then, the patient uses a "share with provider" function to enable the provider to access this data with an app installed in the provider's EHR. The provider writes some or all of the observations into the patient's record in the EHR.</li>
</ul>

<h3 id="configuration">Configuration</h3>
<p>Servers <strong>SHALL</strong> document support for writing Observation resources in their Capability Statements by including a <code class="language-plaintext highlighter-rouge">CapabilityStatement.rest.resource[type=Observation].interaction</code> with a <code class="language-plaintext highlighter-rouge">code</code> of <code class="language-plaintext highlighter-rouge">create</code>. Servers that support the ability to update Observation resources <strong>SHALL</strong> also include an <code class="language-plaintext highlighter-rouge">interaction</code> with a <code class="language-plaintext highlighter-rouge">code</code> of <code class="language-plaintext highlighter-rouge">update</code>.</p>

<h3 id="smart-scopes">SMART Scopes</h3>

<h4 id="patient-facing-apps">Patient-facing apps</h4>

<p>Servers providing the ability to write FHIR vital sign Observation resources from patient-facing apps <strong>SHALL</strong> support the registration and authorization of apps with the <code class="language-plaintext highlighter-rouge">patient/Observation.c?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs</code> SMART scope or a broader version of this scope such as <code class="language-plaintext highlighter-rouge">patient/Observation.c</code>. Note that <code class="language-plaintext highlighter-rouge">read</code> and <code class="language-plaintext highlighter-rouge">search</code> capabilities are already implied by <a href="http://build.fhir.org/ig/HL7/US-Core/StructureDefinition-us-core-vital-signs.html">US Core Vital Signs profile</a>.</p>

<p>Servers providing the ability to write FHIR vital sign Observation resources from patient-facing apps <strong>SHOULD</strong> also support the registration and authorization of apps with the <code class="language-plaintext highlighter-rouge">patient/Observation.u?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs</code> SMART scope or a broader version of this scope such as <code class="language-plaintext highlighter-rouge">patient/Observation.u</code>. Note that systems can support only limited <a href="#updating-previously-submitted-observations">update</a> capabilities.</p>

<p>When offering a patient write capability, health systems may choose to enable or disable this capability based on factors such as the provider, patient, payer, app, and vital type, or may choose to enable the capability broadly. If patients and apps attempting to write data are not enabled, and this can be discerned during the authorization process, the Server <strong>SHALL</strong> omit these unsupported scopes from the resulting access token. If an app uses an access token without the required scopes to submit an <code class="language-plaintext highlighter-rouge">Observation</code> or the patient is not enabled to write data, the Server <strong>SHALL</strong> return an error and <strong>SHOULD</strong> include an <code class="language-plaintext highlighter-rouge">OperationOutcome</code> in the response body.</p>

<h4 id="provider-facing-apps">Provider-facing apps</h4>

<p>Servers providing the ability to write FHIR vital sign Observation resources from provider-facing apps <strong>SHALL</strong> support the registration and authorization of apps with the <code class="language-plaintext highlighter-rouge">user/Observation.c?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs</code> and <code class="language-plaintext highlighter-rouge">system/Observation.c?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs</code> SMART scopes or broader versions of these scopes such as <code class="language-plaintext highlighter-rouge">user/Observation.c</code> and <code class="language-plaintext highlighter-rouge">system/Observation.c</code>. Note that <code class="language-plaintext highlighter-rouge">read</code> and <code class="language-plaintext highlighter-rouge">search</code> capabilities are already implied by <a href="http://build.fhir.org/ig/HL7/US-Core/StructureDefinition-us-core-vital-signs.html">US Core Vital Signs profile</a>.</p>

<p>Servers providing the ability to write FHIR vital sign Observation resources from provider-facing apps <strong>SHOULD</strong> also support the registration and authorization of apps with either <code class="language-plaintext highlighter-rouge">user/Observation.u?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs</code> and <code class="language-plaintext highlighter-rouge">system/Observation.u?category=http://terminology.hl7.org/CodeSystem/observation-category|vital-signs</code> SMART scopes, or broader versions of these scopes such as <code class="language-plaintext highlighter-rouge">user/Observation.u</code> and <code class="language-plaintext highlighter-rouge">system/Observation.u</code>. Note that systems can support only limited <a href="#updating-previously-submitted-observations">update</a> capabilities.</p>

<h4 id="configuration-1">Configuration</h4>
<p>Servers <strong>SHALL</strong> document supported scopes in the <code class="language-plaintext highlighter-rouge">scopes_supported</code> section of a <code class="language-plaintext highlighter-rouge">.well-known/smart-configuration</code> <a href="https://build.fhir.org/ig/HL7/smart-app-launch/conformance.html#launch-context-for-standalone-launch">capabilities array</a>.</p>

<h3 id="resource-submission">Resource Submission</h3>

<p>Servers <strong>SHALL</strong> support the submission of Observation resources that <em>are not</em> the result of a calculation and validate against a <a href="https://build.fhir.org/ig/HL7/US-Core/profiles-and-extensions.html#observation">US Core Vital Sign Profile</a> that corresponds to a version used by the Server for vital sign Observation read requests.</p>

<p>Servers <strong>MAY</strong> support the submission of Observation resources that <em>are</em> the result of a calculation (such as the "US Core Pediatric BMI for Age Observation Profile") and validate against a <a href="https://build.fhir.org/ig/HL7/US-Core/profiles-and-extensions.html#observation">US Core Vital Sign Profile</a> that corresponds to a version used by the Server for vital sign Observation read requests.</p>

<p>Servers <strong>SHALL</strong> respond to supported and valid vital sign Observation creation requests with a status code of <code class="language-plaintext highlighter-rouge">200 OK</code> and a content location header, or with a status code of <code class="language-plaintext highlighter-rouge">202 Accepted</code>. If a content location header is provided, the resources <strong>SHALL</strong> be visible in subsequent read API calls and accessible within the system in the same manner as other patient-submitted data. If a content location header is not provided, and the Server does not subsequently make the resource accessible in read API calls, the Server <strong>SHALL</strong> have a documented and discoverable reason why it was discarded (e.g., a log entry describing rejection during a review workflow or the applicability of a condition in the "Discarding" section below).</p>

<p>Servers <strong>SHALL</strong> support the creation of a single vital sign through a FHIR <code class="language-plaintext highlighter-rouge">create</code> operation, and <strong>MAY</strong> support the creation of multiple vital signs by submitting a FHIR <code class="language-plaintext highlighter-rouge">Batch</code> bundle. When batch creation is supported, Clients <strong>MAY</strong> use this approach to indicate that a set of Observation resources should be reviewed as a group, and systems <strong>MAY</strong> use this information when sending notifications or displaying the data.</p>

<p>Systems may choose to segregate data that originated from a patient from other vital sign data for the patient (for example, showing it on a separate patient flow sheet).</p>

<p>The workflow for submitted Observations is the responsibility of the receiving system and is out of scope for this version of the guide (e.g., requiring provider review for patient-submitted resources before fully integrating them in the chart).</p>

<h4 id="observation-elements">Observation Elements</h4>

<p><code class="language-plaintext highlighter-rouge">meta.tag</code></p>
<ul>
  <li>Client - When writing patient-mediated data into the Server, provider-facing apps <strong>SHALL</strong> include a <code class="language-plaintext highlighter-rouge">Meta.tag</code> with a system of <code class="language-plaintext highlighter-rouge">http://hl7.org/fhir/us/core/CodeSystem/us-core-tags</code> and a value of <code class="language-plaintext highlighter-rouge">patient-supplied</code> to indicate that the data was supplied by a patient or patient designee (such as a parent or spouse) rather than by a healthcare provider.</li>
  <li>Server - Systems <strong>SHALL</strong> associate the <code class="language-plaintext highlighter-rouge">patient-supplied</code> tag with vital signs provided by a patient written through this API, and <strong>MAY</strong> associate the tag with vital signs supplied by a patient regardless of how they arrive in the system. Provider-facing apps writing data supplied by a patient <strong>SHALL</strong> include this tag in the submitted Observation resources. The Server <strong>MAY</strong> subsequently dissociate the tag from the data through an explicit reconciliation process.</li>
</ul>

<div class="stu-note">
  <p>An alternate way to tag any patient-generated data would be to use the  code "PATAST" in the <code class="language-plaintext highlighter-rouge">meta.security</code> element of the resource:</p>

  <blockquote>
    <table>
      <tbody>
        <tr>
          <td>PATAST</td>
          <td>patient asserted: Security provenance metadata observation value used to indicate that an IT resource (data, information object, service, or system capability. was asserted by a patient.)</td>
        </tr>
      </tbody>
    </table>
  </blockquote>

  <p>We are seeking feedback from the community on whether this more compact approach from the FHIR standard could be adopted and supported.</p>
</div>
<!-- stu-note -->

<p><code class="language-plaintext highlighter-rouge">encounter</code></p>
<ul>
  <li>Client - If populating this element, apps <strong>SHALL</strong> use a reference to an Encounter resource in the Server, and <strong>MAY</strong> use the value returned by the <code class="language-plaintext highlighter-rouge">launch/encounter</code> SMART scope.</li>
  <li>Server - Systems <strong>SHOULD</strong> document whether the <code class="language-plaintext highlighter-rouge">encounter</code> element is required to create a vital sign. When not required, Servers <strong>MAY</strong> determine this value based on context if it is omitted.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">subject</code></p>
<ul>
  <li>Client - Apps <strong>SHALL</strong> populate the <code class="language-plaintext highlighter-rouge">subject</code> reference with a reference to a Patient resource in the Server. Patient-facing apps <strong>SHOULD</strong> populate this element based on the value returned as part of the <code class="language-plaintext highlighter-rouge">launch/patient</code> SMART scope.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">device</code></p>
<ul>
  <li>Client - Apps <strong>MAY</strong> populate the <code class="language-plaintext highlighter-rouge">device</code> reference with a reference to the Device resource in the Server or a contained Device resource within the Observation. This is the device used to measure the vital sign (e.g., a BP cuff), not the device used to transmit the data (e.g., a phone). Contained device resources <strong>SHALL</strong> populate at least one <code class="language-plaintext highlighter-rouge">deviceName</code> element.</li>
  <li>Server - When this value is populated with a reference to a Device resource on the Server, Servers <strong>SHALL</strong> return this reference in subsequent reads operations of the resource that was created. When this value is populated with a reference to a valid contained Device resource, Servers <strong>MAY</strong> ignore the contained Device, return the contained Device as part of subsequent read operations, or create a Device resource in the system and return a reference to it in subsequent read operations. Servers <strong>SHALL</strong> not return an error due to the presence of a valid contained Device resource. Servers <strong>SHOULD</strong> document their behavior with regard to contained Device resources.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">performer</code></p>
<ul>
  <li>Client - Apps <strong>SHOULD</strong> populate the <code class="language-plaintext highlighter-rouge">performer</code> element with a reference to a resource in the Server when the resource exists, or the app can create it. For patient-facing apps, if the app knows that a patient collected this data, the app <strong>SHALL</strong> set the <code class="language-plaintext highlighter-rouge">performer</code> to a reference to the patient based on the SMART launch context (this should also match the <code class="language-plaintext highlighter-rouge">Observation.subject</code>). If the relevant resource does not exist and the app cannot create it, the app <strong>SHOULD</strong> populate <code class="language-plaintext highlighter-rouge">performer.display</code>.</li>
  <li>Server - When this value is populated in a successful create operation, systems <strong>SHALL</strong> return it in subsequent read operations of the resource that was created. Note that <code class="language-plaintext highlighter-rouge">performer</code> is not currently required in the US Core vital signs profile.</li>
</ul>

<h3 id="discarding-observations">Discarding Observations</h3>

<p>For a given vital sign type, if many Observations are submitted with <code class="language-plaintext highlighter-rouge">effectiveDateTime</code> or <code class="language-plaintext highlighter-rouge">effectivePeriod</code> values that are close in time, a Server <strong>MAY</strong> choose to discard a portion of these Observations or <strong>MAY</strong> reject submitted Observations with an appropriate OperationOutcome. Systems <strong>SHALL</strong> clearly document this behavior or the ways in which health systems may customize this behavior in the API documentation.</p>

<p>If a Server determines that a vital sign is a duplicate of one it has already stored, the Server <strong>MAY</strong> ignore the Observation or <strong>MAY</strong> reject the submitted Observation with an appropriate OperationOutcome. Systems <strong>SHALL</strong> clearly document this behavior or the ways in which health systems may customize this behavior in the API documentation.</p>

<h3 id="updating-previously-submitted-observations">Updating Previously Submitted Observations</h3>

<p>Servers <strong>SHOULD</strong> support the ability for patients-facing apps to update the <code class="language-plaintext highlighter-rouge">status</code> element of a vital sign resource the user previously wrote to the system from any app to <code class="language-plaintext highlighter-rouge">entered-in-error</code> through an <code class="language-plaintext highlighter-rouge">update</code> interaction. This capability <strong>SHOULD</strong> only be used by apps to address data mistakes in data submission.</p>

<h3 id="including-provenance-information">Including Provenance Information</h3>

<p>Servers <strong>MAY</strong> ignore contained Provenance resources in an Observation being submitted but <strong>SHALL</strong> not return an error due to their presence.</p>

<h4 id="resource-retrieved-from-an-external-organization">Resource retrieved from an external organization</h4>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 1: Resources retrieved from an external organization</strong></figcaption>
  <img src="fhir-write1.svg" class="figure-img img-responsive img-rounded center-block" alt="fhir-write1.svg" />
</figure>

<p></p>
</div>

<p>When writing an Observation that was retrieved from an external organization (e.g., a health system's EHR or a device manufacturer's cloud data store):</p>

<ul>
  <li>Apps <strong>SHALL</strong> pass through any Provenance resources received from the source system, unaltered (except for references, as described below), as contained resources on the Observation. A source system compliant with the US Core FHIR profiles <strong>SHOULD</strong> include a Provenance resource with <code class="language-plaintext highlighter-rouge">agent.type = author</code> that the app can pass through. The app <strong>SHALL</strong> also pass through resources referenced in elements that are labeled as "Must Support" in the USCDI Provenance profile and populated in the Provenance resources, including them as contained resources in the Observation and updating the references to them.</li>
  <li>When a Provenance resource with <code class="language-plaintext highlighter-rouge">agent.type = author</code> is not received from the source system, apps <strong>SHALL</strong> generate a contained Provenance resource with:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">recorded</code> set to date and time recorded</li>
      <li><code class="language-plaintext highlighter-rouge">agent.type = author</code> that has <code class="language-plaintext highlighter-rouge">agent.who</code> set to the organization/provider that authored the content, with at least the <code class="language-plaintext highlighter-rouge">who.display</code> element populated.
        <ul>
          <li>When available, a <code class="language-plaintext highlighter-rouge">who.identifier.value</code> should be set to the URL where that data was retrieved, and <code class="language-plaintext highlighter-rouge">who.identifier.system</code> should be set to <code class="language-plaintext highlighter-rouge">urn:ietf:rfc:3986</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Apps <strong>MAY</strong> include a Provenance resource with <code class="language-plaintext highlighter-rouge">agent.type = transmitter</code> with information on the entity that submitted the data. Systems <strong>MAY</strong> store and display this information and <strong>MAY</strong> populate this information based on the SMART context associated with the write.</li>
</ul>

<p>Example:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">resourceType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Observation</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">contained</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="dl">"</span><span class="s2">resourceType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Provenance</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">contained_1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span><span class="dl">"</span><span class="s2">reference</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">}],</span>
    <span class="dl">"</span><span class="s2">recorded</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2019-07-09T15:26:23.217+00:00</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">agent</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">coding</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
          <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://terminology.hl7.org/CodeSystem/provenance-participant-type</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Author</span><span class="dl">"</span>
        <span class="p">}]</span>
      <span class="p">},</span>
      <span class="dl">"</span><span class="s2">who</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Saint Luke </span><span class="se">\</span><span class="s2">'s Hospital of Kansas City</span><span class="dl">"</span><span class="p">,</span>
        <span class="c1">// identifier could be a URL, as in Patient Access Brands</span>
        <span class="dl">"</span><span class="s2">identifier</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">urn:ietf:rfc:3986</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://stlukes.example.org</span><span class="dl">"</span>
        <span class="p">}</span>  
      <span class="p">}</span>
    <span class="p">},{</span>
      <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">coding</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
          <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://terminology.hl7.org/CodeSystem/provenance-participant-type</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">transmitter</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Transmitter</span><span class="dl">"</span>
        <span class="p">}]</span>
      <span class="p">},</span>
      <span class="dl">"</span><span class="s2">who</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1">//this is the user submitting the data</span>
        <span class="c1">//can be populated by the EHR based on the SMART context if omitted</span>
        <span class="dl">"</span><span class="s2">reference</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Patient/123</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">}]</span>
  <span class="p">}]</span>
  <span class="c1">// ... other Observation elements</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="resources-not-retrieved-from-an-external-organization">Resources not retrieved from an external organization</h4>

<!-- all this Bootstrap html for getting an narrow image to fit nicely in text - 640 pix wide -->

<div>
<figure class="figure">
<figcaption class="figure-caption"><strong>Figure 2: Resources not retrieved from an external organization</strong></figcaption>
  <img src="fhir-write2.svg" class="figure-img img-responsive img-rounded center-block" alt="fhir-write2.svg" />
</figure>

<p></p>
</div>

<p>When writing an Observation that was not retrieved from an external organization (e.g., transmitted by a home blood pressure cuff or manually entered by a patient):</p>

<ul>
  <li>Apps <strong>MAY</strong> include a contained Provenance resource with <code class="language-plaintext highlighter-rouge">agent.type = author</code> containing information on the party that wrote the data. Systems <strong>MAY</strong> store and display this information and <strong>MAY</strong> populate it based on the SMART context associated with the write.</li>
  <li>Apps <strong>MAY</strong> include one or more contained Provenance resources with <code class="language-plaintext highlighter-rouge">agent.type = composer</code> and <code class="language-plaintext highlighter-rouge">agent.type = assembler</code> with information on the device, app, or apps that captured or passed along the data.</li>
</ul>

<p>Example:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[{</span>
  <span class="dl">"</span><span class="s2">resourceType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Provenance</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span><span class="dl">"</span><span class="s2">reference</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">}],</span>
  <span class="dl">"</span><span class="s2">recorded</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2019-07-08</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">agent</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">coding</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://terminology.hl7.org/CodeSystem/provenance-participant-type</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">composer</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Composer</span><span class="dl">"</span>
      <span class="p">}]</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">who</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">//this is the app that provided the original data</span>
      <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OMRON for iOS</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">coding</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://terminology.hl7.org/CodeSystem/provenance-participant-type</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Author</span><span class="dl">"</span>
      <span class="p">}]</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">who</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">reference</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Patient/123</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">},{</span>
  <span class="dl">"</span><span class="s2">resourceType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Provenance</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span><span class="dl">"</span><span class="s2">reference</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#</span><span class="dl">"</span><span class="p">}],</span>
  <span class="dl">"</span><span class="s2">recorded</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2019-07-09T10:26:23.217+00:00</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">agent</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">coding</span><span class="dl">"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="dl">"</span><span class="s2">system</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://terminology.hl7.org/CodeSystem/provenance-participant-type</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">assembler</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Assembler</span><span class="dl">"</span>
      <span class="p">}]</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">who</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">//this is the app that transmits the data</span>
      <span class="dl">"</span><span class="s2">display</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Healthkit</span><span class="dl">"</span> 
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}]</span>
</code></pre></div></div>



</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2025+ <a style="color:var(--footer-hyperlink-text-color)" href="http://www.hl7.org/Special/committees/cgp">HL7 International / Cross-Group Projects</a>.  Package hl7.fhir.us.core#8.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Tue, Jun 10, 2025 18:29+0000">2025-06-10</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
                 | <a style="color: #81BEF7" target="_blank" href="http://hl7.org/fhir/us/core/history.html">Version History</a> |
                 <a style="color: #81BEF7" rel="license" href="http://hl7.org/fhir/R4/license.html"><img style="border-style: none;" alt="CC0" src="cc0.png"/></a> |
                 <!--<a style="color: #81BEF7" href="todo.html">Search</a> | --> 
                 <a style="color: #81BEF7" target="_blank" href="http://hl7.org/fhir-issues">Propose a change</a>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

